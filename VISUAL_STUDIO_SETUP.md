# Visual Studio Setup Guide

This guide explains how to properly set up and use Visual Studio with this Unity project.

## Understanding Unity's IDE File Generation

Unity **automatically generates** IDE-specific files when you open a project:
- `*.csproj` - C# project files for each assembly
- `*.sln` - Solution file that references all .csproj files
- `*.unityproj` - Legacy Unity project files

These files are **not stored in the repository** because:
1. They are auto-generated based on your Unity project structure
2. They differ between Unity versions
3. They may contain user-specific paths
4. Different team members may use different IDEs

## Setting Up Visual Studio with Unity

### Step 1: Install Unity with Visual Studio Support

When installing Unity through Unity Hub:

1. **Select Visual Studio as the external script editor**
2. **Include Visual Studio Tools for Unity** in the Unity installation modules

OR install separately:
- Visual Studio 2019 or later (Community, Professional, or Enterprise)
- Visual Studio Tools for Unity (VSTU) extension

### Step 2: Configure Unity to Use Visual Studio

1. Open the Unity project in Unity Editor
2. Go to **Edit → Preferences** (Windows) or **Unity → Settings** (macOS)
3. Select **External Tools**
4. Set **External Script Editor** to your Visual Studio installation
5. Enable **Generate .csproj files for:**
   - ☑ Embedded packages
   - ☑ Local packages
   - ☑ Registry packages
   - ☑ Git packages
   - ☑ Built-in packages
6. Click **Regenerate project files**

### Step 3: Open the Project in Visual Studio

**Method A: From Unity (Recommended)**
1. In Unity, double-click any C# script
2. Visual Studio will open with the correct solution

**Method B: Direct**
1. Unity will have generated `unity-chronicles.sln` in the project root
2. Double-click `unity-chronicles.sln` to open in Visual Studio

## Troubleshooting Visual Studio Issues

### Issue: "Project types may not be installed or this version of Visual Studio may not support them"

**Cause**: The .csproj/.sln files are either:
- Missing (not generated by Unity yet)
- Out of date
- Generated by a different Unity version

**Solution**:

1. **Close Visual Studio completely**

2. **Delete generated files** (if they exist):
   ```bash
   # Windows PowerShell
   Remove-Item *.sln, *.csproj -Force
   
   # macOS/Linux
   rm -f *.sln *.csproj
   ```

3. **Regenerate from Unity**:
   - Open the project in Unity Editor
   - Go to **Edit → Preferences → External Tools**
   - Click **Regenerate project files**
   - Wait for Unity to finish processing

4. **Open from Unity**:
   - Double-click any C# script in Unity's Project window
   - Visual Studio will open with the regenerated solution

### Issue: "The project file has been moved, renamed, or deleted"

**Cause**: Unity hasn't generated the project files yet, or they're out of sync.

**Solution**: Follow the "Regenerate project files" steps above.

### Issue: IntelliSense not working / Unity classes not recognized

**Symptoms**:
- Red underlines on `MonoBehaviour`, `GameObject`, etc.
- "The type or namespace name 'UnityEngine' could not be found"

**Solution**:

1. **Check Visual Studio Tools for Unity**:
   - Go to **Tools → Extensions and Updates**
   - Search for "Visual Studio Tools for Unity"
   - Install or update if needed

2. **Regenerate project files** (see above)

3. **Reload the solution**:
   - In Visual Studio: **File → Close Solution**
   - Then: **File → Recent Projects** → Reopen the solution

4. **Clean and rebuild**:
   - **Build → Clean Solution**
   - **Build → Rebuild Solution**

### Issue: Multiple "Assembly-CSharp" projects shown as unsupported

**Cause**: This is expected with Unity 6 LTS. Unity generates different project structures than older versions.

**What you should see**:
- ✅ `unity-chronicles.sln` (main solution) - **This works fine**
- ⚠️ `Assembly-CSharp.csproj` (individual assembly) - May show warning but is included in main solution
- ⚠️ `Assembly-CSharp-Editor.csproj` (editor assembly) - May show warning but is included in main solution

**Solution**: 
- **Always open `unity-chronicles.sln`** (the main solution file)
- Ignore the individual .csproj warnings - they're included in the main solution

## Best Practices

### ✅ DO:
- Always open Unity projects through Unity Hub first
- Let Unity generate the .csproj and .sln files
- Open scripts by double-clicking them in Unity
- Regenerate project files after adding/removing scripts
- Regenerate project files after updating Unity version

### ❌ DON'T:
- Don't commit .csproj or .sln files to Git (they're in .gitignore)
- Don't manually edit .csproj or .sln files
- Don't open individual .csproj files directly
- Don't create your own Visual Studio solution for Unity projects

## Alternative IDEs

If Visual Studio isn't working for you, Unity also supports:

### Visual Studio Code
- Install [Unity for Visual Studio Code](https://marketplace.visualstudio.com/items?itemName=visualstudiotoolsforunity.vstuc) extension
- Or use [C# Dev Kit](https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.csdevkit)
- Lightweight and cross-platform

### JetBrains Rider
- First-class Unity support built-in
- Excellent for large Unity projects
- Paid but has free student/educational licenses

### How to Switch IDEs:
1. **Edit → Preferences → External Tools**
2. Change **External Script Editor** to your preferred IDE
3. Click **Regenerate project files**

## Verification Checklist

After setup, verify everything works:

- [ ] Unity Editor opens the project without errors (except known warnings)
- [ ] Double-clicking a C# script in Unity opens Visual Studio
- [ ] IntelliSense works (you see autocomplete for Unity classes)
- [ ] No red underlines on `MonoBehaviour`, `GameObject`, etc.
- [ ] You can build the project in Unity (File → Build Settings → Build)
- [ ] You can debug C# scripts (set breakpoints in Visual Studio)

## Additional Resources

- [Unity Manual: Visual Studio Integration](https://docs.unity3d.com/Manual/VisualStudioIntegration.html)
- [Microsoft: Visual Studio Tools for Unity](https://visualstudio.microsoft.com/vs/unity-tools/)
- [Unity Forum: Visual Studio Support](https://forum.unity.com/)

## Related Guides

- **TileTemplate errors?** → See [TILETEMPLATE_SOLUTION.md](TILETEMPLATE_SOLUTION.md)
- **Multiple TimeManager warnings?** → See [TROUBLESHOOTING.md](TROUBLESHOOTING.md)
- **Unity setup issues?** → See [README_UNITY.md](README_UNITY.md)

---

**Last Updated**: November 2025  
**Unity Version**: 6 LTS (6000.0.62f1)  
**Recommended Visual Studio**: 2019 or later
