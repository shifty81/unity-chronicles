# üö® CRITICAL FIX: Cannot Enter Play Mode - Compilation Errors

## The Problem

If you're seeing these errors in Unity Console and **cannot click Play**:

```
Library\PackageCache\com.unity.2d.tilemap.extras@05b20556f4e5\Editor\Tiles\AutoTile\AutoTileTemplate.cs(12,37): 
error CS0246: The type or namespace name 'TileTemplate' could not be found

Library\PackageCache\com.unity.2d.tilemap.extras@05b20556f4e5\Editor\Tiles\RuleTile\RuleTileTemplate.cs(13,37): 
error CS0246: The type or namespace name 'TileTemplate' could not be found
```

Unity will display: **"All compiler errors must be fixed before you can enter play mode"**

## The Cause

Unity is using a **cached version** of the `com.unity.2d.tilemap.extras` package (version 6.0.1) which has a bug. The project specifies version 7.0.0 (which fixes the bug), but Unity is loading the old cached version from `Library/PackageCache/`.

## The Solution - 3 Simple Steps

### Step 1: Close Unity Editor Completely
- Exit Unity Editor entirely
- Make sure it's not running in the background

### Step 2: Run the Cleanup Script

**On Windows:**
```powershell
.\cleanup-unity-cache.ps1
```
- Right-click on the file and select "Run with PowerShell"
- OR open PowerShell in the project folder and run the command above
- Select option **1** (Remove Library/PackageCache only)

**On macOS/Linux:**
```bash
./cleanup-unity-cache.sh
```
- Open Terminal in the project folder
- Run the command above
- Select option **1** (Remove Library/PackageCache only)

### Step 3: Reopen Project
1. Open Unity Hub
2. Open the project from Unity Hub
3. Wait 2-5 minutes while Unity:
   - Downloads the correct package version (7.0.0)
   - Resolves dependencies
   - Reimports assets
4. Check the Console - **errors should be gone!**
5. Click Play ‚ñ∂Ô∏è - it should now work!

## Still Not Working?

If the errors persist after running the cleanup script:

### Try the Advanced Cleanup

**On Windows:**
```powershell
.\advanced-cleanup.ps1
```

**On macOS/Linux:**
```bash
./advanced-cleanup.sh
```

This will also clear system-wide Unity caches and force a complete re-download.

**After running:**
1. Close Unity Editor AND Unity Hub completely
2. Reopen Unity Hub
3. Open the project
4. Wait 5-10 minutes for full reimport

## What These Scripts Do

### ‚úÖ Safe Actions (Everything is regenerated by Unity)
- Deletes `Library/PackageCache/` (project-level package cache)
- Deletes `Packages/packages-lock.json` (package version lock file)
- Optionally deletes entire `Library/` folder (Unity regenerates this)
- Advanced script also clears system-wide Unity caches

### ‚ùå Never Deleted (Your work is safe!)
- `Assets/` folder (your game content)
- `ProjectSettings/` (your project configuration)
- `Packages/manifest.json` (package specifications)
- Your scenes, scripts, and assets

## Technical Details

**Why does this happen?**
- Unity caches packages in `Library/PackageCache/` to avoid re-downloading
- Sometimes Unity uses an old cached version even when `manifest.json` specifies a newer version
- The hash `05b20556f4e5` in the error indicates version 6.0.1 (buggy)
- Version 7.0.0 (correct) has a different hash and fixes the TileTemplate bug

**What the cleanup does:**
1. Removes the cached buggy package
2. Removes the lock file that pins the old version
3. Forces Unity to read `manifest.json` which specifies 7.0.0
4. Unity downloads 7.0.0 from packages.unity.com
5. Compilation errors are resolved

## Prevention

To avoid this in the future:
- Always close Unity completely before running cleanup scripts
- Use Unity Hub to open projects (not direct .exe)
- After updating packages, close and reopen Unity
- Don't manually edit files in `Library/PackageCache/`

## More Help

- **Quick fixes**: [QUICK_FIX.md](QUICK_FIX.md)
- **Detailed explanation**: [TILETEMPLATE_SOLUTION.md](TILETEMPLATE_SOLUTION.md)
- **All cleanup tools**: [CLEANUP_TOOLS.md](CLEANUP_TOOLS.md)
- **Troubleshooting**: [TROUBLESHOOTING.md](TROUBLESHOOTING.md)

---

**Last Updated:** November 2025  
**Issue:** TileTemplate compilation errors blocking play mode  
**Solution:** Run cleanup scripts to clear package cache
