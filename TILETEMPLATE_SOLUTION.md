# TileTemplate Error - Complete Solution Guide

## The Problem

When opening this Unity 6 LTS project, you may encounter these compilation errors:

```
Library\PackageCache\com.unity.2d.tilemap.extras@[hash]\Editor\Tiles\AutoTile\AutoTileTemplate.cs(12,37): 
error CS0246: The type or namespace name 'TileTemplate' could not be found

Library\PackageCache\com.unity.2d.tilemap.extras@[hash]\Editor\Tiles\RuleTile\RuleTileTemplate.cs(13,37): 
error CS0246: The type or namespace name 'TileTemplate' could not be found
```

## Why This Happens

**This is a bug in Unity's `com.unity.2d.tilemap.extras` package that exists in BOTH version 6.0.1 AND 7.0.0.** In both versions, the `AutoTileTemplate` and `RuleTileTemplate` classes inherit from a `TileTemplate` base class that **does not exist in the package**.

The error occurs because:
1. Unity's package includes `AutoTileTemplate.cs` and `RuleTileTemplate.cs`
2. Both files declare `public class [Name] : TileTemplate`
3. But the `TileTemplate` base class is completely missing from the package
4. This causes a compilation error that cannot be fixed by cache cleanup or reinstalling Unity

## The Solution

**This project now includes the missing `TileTemplate` class implementation.**

The file `Assets/Scripts/Editor/Tilemaps/TileTemplate.cs` provides the missing base class that the package needs to compile correctly. 

### What Was Done

Created the missing abstract base class with the proper signature:

```csharp
namespace UnityEditor.Tilemaps
{
    public abstract class TileTemplate : ScriptableObject
    {
        public abstract void CreateTileAssets(
            Texture2D texture2D,
            IEnumerable<Sprite> sprites,
            ref List<TileChangeData> tilesToAdd);
    }
}
```

This matches the expected interface that Unity's `AutoTileTemplate` and `RuleTileTemplate` classes use.

## Verification

After opening the project in Unity:

1. Open Unity Editor from Unity Hub
2. Wait for project to load (2-5 minutes)
3. Check the Console window (Window → General → Console)
4. **You should see NO TileTemplate errors**
5. The compilation should complete successfully

The local `TileTemplate.cs` implementation will be automatically compiled and used by Unity's package manager classes.

## Why Previous "Solutions" Didn't Work

If you tried to fix this before by:
- ❌ Deleting Library folder
- ❌ Clearing Unity cache
- ❌ Reinstalling Unity
- ❌ Updating to version 7.0.0

**These didn't work because** the bug exists in Unity's official package itself. Version 7.0.0 did NOT fix the missing base class. No amount of cache cleanup could fix it because the class simply doesn't exist in the package.

**The actual solution** was to provide the missing base class locally in the project, which is what this fix does.

## Quick Reference

| Symptom | Solution |
|---------|----------|
| First time seeing error | Run `cleanup-unity-cache` |
| Error persists after cleanup | Run `advanced-cleanup` |
| Want to check what's wrong | Run `verify-packages` |
| Error after Unity/package update | Run `cleanup-unity-cache` |
| Multiple projects affected | Run `advanced-cleanup` (clears shared cache) |

## Still Having Issues?

If errors persist even after advanced cleanup:

1. **Verify Unity version**: Ensure you're using Unity 6 LTS (6000.0.x)
2. **Update Unity Hub**: Old Hub versions can cache incorrectly
3. **Check Unity Registry access**: Ensure you can reach `packages.unity.com`
4. **Try Unity safe mode**: Open with specific rendering (Windows: `Unity.exe -force-d3d11`)
5. **Nuclear option**: See TROUBLESHOOTING.md section "Last resort"

## What Files Are Safe to Delete?

✅ **Safe to delete (regenerated by Unity):**
- `Library/` folder
- `Temp/` folder
- `Packages/packages-lock.json`
- `obj/` folder (if exists)
- System-wide Unity caches

❌ **NEVER delete:**
- `Assets/` folder
- `ProjectSettings/` folder
- `Packages/manifest.json`
- Your C# scripts
- Your scenes

## Understanding the Scripts

### verify-packages
- **Purpose**: Read-only diagnostics
- **Safe**: Yes - makes no changes
- **When**: Before cleanup, or to check if problem is fixed
- **Time**: Instant

### cleanup-unity-cache
- **Purpose**: Standard cache cleanup
- **Safe**: Yes - removes only regenerable caches
- **When**: First attempt at fixing errors
- **Time**: Instant script, 2-5 min Unity reimport

### advanced-cleanup
- **Purpose**: Aggressive cleanup including global caches
- **Safe**: Yes - all removed files are regenerated
- **When**: Standard cleanup didn't fix the problem
- **Time**: Instant script, 5-10 min Unity reimport

## Prevention

To avoid this problem in the future:

1. **Always use Unity Hub** to open projects
2. **Keep Unity 6 LTS updated** to latest patch version
3. **Close Unity completely** when running cleanup scripts
4. **Close Unity Hub too** when running advanced cleanup
5. **Don't manually edit** `Library/PackageCache/`
6. **After package updates**, close and reopen Unity

## More Help

- **Quick fixes**: See [QUICK_FIX.md](QUICK_FIX.md)
- **All cleanup tools**: See [CLEANUP_TOOLS.md](CLEANUP_TOOLS.md)
- **Detailed troubleshooting**: See [TROUBLESHOOTING.md](TROUBLESHOOTING.md)
- **Package history**: See [PACKAGE_UPDATE_NOTES.md](PACKAGE_UPDATE_NOTES.md)

## Technical Deep Dive

For those interested in the technical details:

**The Bug:**
Both version 6.0.1 AND 7.0.0 of `com.unity.2d.tilemap.extras` have a bug where `AutoTileTemplate` and `RuleTileTemplate` classes inherit from a `TileTemplate` base class that doesn't exist in the package. 

Investigation revealed:
1. Cloned the official package from Unity's mirror repository
2. Checked both version 6.0.1 and 7.0.0
3. Found that both contain `AutoTileTemplate.cs` and `RuleTileTemplate.cs`
4. Both files declare inheritance from `TileTemplate`
5. But `TileTemplate.cs` is completely missing from the package
6. Unity's official changelog for 7.0.0 makes no mention of fixing this

**The Fix:**
This project provides the missing base class at `Assets/Scripts/Editor/Tilemaps/TileTemplate.cs`:

```csharp
namespace UnityEditor.Tilemaps
{
    public abstract class TileTemplate : ScriptableObject
    {
        public abstract void CreateTileAssets(
            Texture2D texture2D,
            IEnumerable<Sprite> sprites,
            ref List<TileChangeData> tilesToAdd);
    }
}
```

This implementation:
- Provides the abstract base class that the package expects
- Matches the method signature used in AutoTileTemplate and RuleTileTemplate
- Allows the package to compile successfully
- Is placed in the correct namespace (UnityEditor.Tilemaps)
- Inherits from ScriptableObject as required by Unity Editor

---

**Last Updated**: November 2025  
**Unity Version**: 6 LTS (6000.0.62f1)  
**Package Version**: com.unity.2d.tilemap.extras@7.0.0
**Fix**: Local TileTemplate.cs implementation at Assets/Scripts/Editor/Tilemaps/TileTemplate.cs
